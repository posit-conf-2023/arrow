{
  "hash": "0f07a505cbf5fabd7fc24416ca835d64",
  "result": {
    "markdown": "---\ntitle: \"Arrow In-Memory Exercise\"\nexecute:\n  echo: true\n  messages: false\n  warning: false\neditor: source\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(arrow)\nlibrary(dplyr)\n```\n:::\n\n\n::: {#exercise-hello-nyc-taxi .callout-tip}\n## Arrow Table\n\n::: panel-tabset\n## Problems\n\n1.  Read in a single NYC Taxi parquet file using `read_parquet()` as an Arrow Table\n\n2.  Convert your Arrow Table object to a `data.frame` or a `tibble`\n\n## Solution 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nparquet_file <- here::here(\"data/nyc-taxi/year=2019/month=9/part-0.parquet\")\n\ntaxi_table <- read_parquet(parquet_file, as_data_frame = FALSE)\ntaxi_table\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTable\n6567396 rows x 22 columns\n$vendor_name <string>\n$pickup_datetime <timestamp[ms]>\n$dropoff_datetime <timestamp[ms]>\n$passenger_count <int64>\n$trip_distance <double>\n$pickup_longitude <double>\n$pickup_latitude <double>\n$rate_code <string>\n$store_and_fwd <string>\n$dropoff_longitude <double>\n$dropoff_latitude <double>\n$payment_type <string>\n$fare_amount <double>\n$extra <double>\n$mta_tax <double>\n$tip_amount <double>\n$tolls_amount <double>\n$total_amount <double>\n$improvement_surcharge <double>\n$congestion_surcharge <double>\n$pickup_location_id <int64>\n$dropoff_location_id <int64>\n```\n:::\n:::\n\n\n## Solution 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_table |> collect()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6,567,396 × 22\n   vendor_name pickup_datetime     dropoff_datetime    passenger_count\n   <chr>       <dttm>              <dttm>                        <int>\n 1 CMT         2019-08-31 18:09:30 2019-08-31 18:15:42               1\n 2 CMT         2019-08-31 18:26:30 2019-08-31 18:44:31               1\n 3 CMT         2019-08-31 18:39:35 2019-08-31 19:15:55               2\n 4 VTS         2019-08-31 18:12:26 2019-08-31 18:15:17               4\n 5 VTS         2019-08-31 18:43:16 2019-08-31 18:53:50               1\n 6 VTS         2019-08-31 18:26:13 2019-08-31 18:45:35               1\n 7 CMT         2019-08-31 18:34:52 2019-08-31 18:42:03               1\n 8 CMT         2019-08-31 18:50:02 2019-08-31 18:58:16               1\n 9 CMT         2019-08-31 18:08:02 2019-08-31 18:14:44               0\n10 VTS         2019-08-31 18:11:38 2019-08-31 18:26:47               1\n# ℹ 6,567,386 more rows\n# ℹ 18 more variables: trip_distance <dbl>, pickup_longitude <dbl>,\n#   pickup_latitude <dbl>, rate_code <chr>, store_and_fwd <chr>,\n#   dropoff_longitude <dbl>, dropoff_latitude <dbl>, payment_type <chr>,\n#   fare_amount <dbl>, extra <dbl>, mta_tax <dbl>, tip_amount <dbl>,\n#   tolls_amount <dbl>, total_amount <dbl>, improvement_surcharge <dbl>,\n#   congestion_surcharge <dbl>, pickup_location_id <int>, …\n```\n:::\n:::\n\n\nor\n\n\n::: {.cell}\n\n```{.r .cell-code}\nas_tibble(taxi_table)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6,567,396 × 22\n   vendor_name pickup_datetime     dropoff_datetime    passenger_count\n   <chr>       <dttm>              <dttm>                        <int>\n 1 CMT         2019-08-31 18:09:30 2019-08-31 18:15:42               1\n 2 CMT         2019-08-31 18:26:30 2019-08-31 18:44:31               1\n 3 CMT         2019-08-31 18:39:35 2019-08-31 19:15:55               2\n 4 VTS         2019-08-31 18:12:26 2019-08-31 18:15:17               4\n 5 VTS         2019-08-31 18:43:16 2019-08-31 18:53:50               1\n 6 VTS         2019-08-31 18:26:13 2019-08-31 18:45:35               1\n 7 CMT         2019-08-31 18:34:52 2019-08-31 18:42:03               1\n 8 CMT         2019-08-31 18:50:02 2019-08-31 18:58:16               1\n 9 CMT         2019-08-31 18:08:02 2019-08-31 18:14:44               0\n10 VTS         2019-08-31 18:11:38 2019-08-31 18:26:47               1\n# ℹ 6,567,386 more rows\n# ℹ 18 more variables: trip_distance <dbl>, pickup_longitude <dbl>,\n#   pickup_latitude <dbl>, rate_code <chr>, store_and_fwd <chr>,\n#   dropoff_longitude <dbl>, dropoff_latitude <dbl>, payment_type <chr>,\n#   fare_amount <dbl>, extra <dbl>, mta_tax <dbl>, tip_amount <dbl>,\n#   tolls_amount <dbl>, total_amount <dbl>, improvement_surcharge <dbl>,\n#   congestion_surcharge <dbl>, pickup_location_id <int>, …\n```\n:::\n:::\n\n\nor\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nas.data.frame(taxi_table)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  vendor_name     pickup_datetime    dropoff_datetime passenger_count\n1         CMT 2019-08-31 18:09:30 2019-08-31 18:15:42               1\n2         CMT 2019-08-31 18:26:30 2019-08-31 18:44:31               1\n3         CMT 2019-08-31 18:39:35 2019-08-31 19:15:55               2\n4         VTS 2019-08-31 18:12:26 2019-08-31 18:15:17               4\n5         VTS 2019-08-31 18:43:16 2019-08-31 18:53:50               1\n  trip_distance pickup_longitude pickup_latitude     rate_code store_and_fwd\n1          0.80               NA              NA Standard rate            No\n2          3.70               NA              NA Standard rate            No\n3          8.10               NA              NA Standard rate            No\n4          0.58               NA              NA Standard rate            No\n5          3.32               NA              NA Standard rate            No\n  dropoff_longitude dropoff_latitude payment_type fare_amount extra mta_tax\n1                NA               NA         Cash         6.0   3.0     0.5\n2                NA               NA  Credit card        15.0   3.0     0.5\n3                NA               NA  Credit card        29.5   3.0     0.5\n4                NA               NA  Credit card         4.0   0.5     0.5\n5                NA               NA  Credit card        12.5   0.5     0.5\n  tip_amount tolls_amount total_amount improvement_surcharge\n1       0.00            0         9.80                   0.3\n2       3.00            0        21.80                   0.3\n3       0.00            0        33.30                   0.3\n4       1.06            0         6.36                   0.3\n5       3.26            0        19.56                   0.3\n  congestion_surcharge pickup_location_id dropoff_location_id\n1                  2.5                148                  79\n2                  2.5                148                 230\n3                  2.5                 79                 188\n4                  0.0                 80                  80\n5                  2.5                148                  87\n [ reached 'max' / getOption(\"max.print\") -- omitted 6567391 rows ]\n```\n:::\n:::\n\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}